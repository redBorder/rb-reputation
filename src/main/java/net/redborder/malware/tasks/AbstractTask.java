package net.redborder.malware.tasks;

public abstract class AbstractTask implements Task{

    protected String taskName;

    @Override
    public Object doTask(TaskMonitor monitor){

        monitor.setCurrentActivityDescription(String.format("Doing task %s ...", getTaskName()));

        if (monitor.taskShouldAbort()) {
            shutdown();
            return null;
        }

        Object result = doTaskImpl(monitor);
        monitor.setCurrentActivityDescription(String.format("Task %s complete.", getTaskName()));

        return result;
    }

    @Override
    public void shutdown(){
        shutdownImpl();
    }

    public String getTaskName(){
        return taskName;
    }

    public void setTaskName(String newTaskName){
        this.taskName = newTaskName;
    }

    protected abstract Object doTaskImpl(TaskMonitor monitor);

    protected abstract void shutdownImpl();

}
