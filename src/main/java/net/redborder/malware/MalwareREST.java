package net.redborder.malware;

import com.aerospike.client.async.AsyncClient;
import net.redborder.malware.managers.AeroSpikeManager;
import net.redborder.malware.config.Config;
import net.redborder.malware.config.ConfigException;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import static spark.Spark.get;

public class MalwareREST {

    private static final Logger log = LoggerFactory.getLogger(MalwareREST.class);


    public static void main(String[] args){

        Config.addList("aerospike.servers", "10.0.150.193:3000");
        Config.addInt("aerospike.clientTimeout", "500");

        AeroSpikeManager asm;

        try {
            asm = new AeroSpikeManager(Config.createConfig());
            if(asm.verifyConnection())
                log.info("Connection stablished");

        } catch (ConfigException e) {
            e.printStackTrace();
        }

        get("/malware", (req, res) -> {

            return "Not implemented yet";
        });

        get("/malware/:sha", (req, res) -> {

            return "Not implemented yet";
        });

    }

}
